{% extends 'adminBase.html.twig' %}

{% block title %}Détails -
	{{ category.name }}
	- Tiramisou
{% endblock %}

{% block body %}
	<div class="container my-4">
		<div class="d-flex justify-content-between align-items-center mb-4">
			<h1>Détails -
				{{ category.name }}</h1>
			<a href="{{ path('admin.categories') }}" class="btn btn-secondary">Retour à la liste</a>
		</div>

		<div class="row">
			<div class="col-md-6 mb-4">
				<div class="card">
					<div class="card-header">
						<h5 class="mb-0">Informations générales</h5>
					</div>
					<div class="card-body">
						<p>
							<strong>Nom :</strong>
							{{ category.name }}</p>
						<p>
							<strong>Nombre de produits :</strong>
							{{ category.products|length }}
						</p>
						<p class="mb-0">
							<strong>Créé le :</strong>
							{{ category.createdAt|date('d/m/Y à H:i') }}</p>
					</div>
				</div>
			</div>

			<div class="col-md-6 mb-4">
				<div class="card">
					<div class="card-header">
						<h5 class="mb-0">Description</h5>
					</div>
					<div class="card-body">
						{% if category.description %}
							<p class="mb-0">{{ category.description }}</p>
						{% else %}
							<p class="text-muted mb-0">Aucune description disponible</p>
						{% endif %}
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12 mb-4">
				<div class="card">
					<div class="card-header">
						<h5 class="mb-0">Produits associés</h5>
					</div>
					<div class="card-body">
						{% if category.products|length > 0 %}
							<table class="table table-striped">
								<thead>
									<tr>
										<th>Nom</th>
										<th class="text-end">Prix</th>
										<th class="text-center">Stock</th>
										<th class="text-center">Statut</th>
										<th class="text-center">Actions</th>
									</tr>
								</thead>
								<tbody>
									{% for product in category.products %}
										<tr>
											<td>{{ product.name }}</td>
											<td class="text-end">{{ product.price|number_format(2, ',', ' ') }}
												€</td>
											<td class="text-center">
												{% if product.stock > 0 %}
													<span class="badge bg-success">{{ product.stock }}</span>
												{% else %}
													<span class="badge bg-danger">0</span>
												{% endif %}
											</td>
											<td class="text-center">
												{% if product.status.value == 'available' %}
													<span class="badge bg-success">{{ product.status.value }}</span>
												{% else %}
													<span class="badge bg-secondary">{{ product.status.value }}</span>
												{% endif %}
											</td>
											<td class="text-center">
												<a href="{{ path('admin.product.show', {id: product.id}) }}" class="btn btn-sm btn-info">Voir</a>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						{% else %}
							<p class="text-muted mb-0">Aucun produit dans cette catégorie</p>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
